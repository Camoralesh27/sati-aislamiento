const showMenu=(e,t)=>{const n=document.getElementById(e),o=document.getElementById(t);n.addEventListener("click",()=>{o.classList.toggle("show-menu"),n.classList.toggle("show-icon")});const r=document.querySelector(".navM__dropdown-toggle"),s=document.querySelector(".navM__dropdown");document.querySelectorAll(`#${t} .navM__link`).forEach(e=>{e.addEventListener("click",t=>{e.classList.contains("navM__dropdown-toggle")||(o.classList.remove("show-menu"),n.classList.remove("show-icon"),s.classList.contains("active")&&s.classList.remove("active"))})}),r&&s&&r.addEventListener("click",e=>{e.preventDefault(),s.classList.toggle("active")})};showMenu("navM-toggle","navM-menu"),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".contact__form"),t=Array.from(e.querySelectorAll(".contact__input, .contact__textarea")),n=e.querySelector(".contact__button"),o=e.querySelector("#contactFlash"),r=/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i,s=e=>(e||"").replace(/\s/g,""),c=e=>""===s(e);function a(e){return e.closest(".contact__field").querySelector(".contact__error")}function i(e,t){const n=a(e);n.textContent=t,n.classList.add("is-visible")}function l(e){const t=a(e);t.textContent="",t.classList.remove("is-visible")}function u(e){const t=e.name,n=(e.value||"").trim();if("name"===t)return c(n)?(i(e,"Por favor, ingresa tu nombre completo."),!1):(l(e),!0);if("email"===t)return c(n)?(i(e,"Por favor, ingresa tu correo electrónico."),!1):r.test(n)?(l(e),!0):(i(e,"El correo no es válido."),!1);if("message"===t){return s(e.value).length<10?(i(e,"El mensaje debe tener al menos 10 caracteres."),!1):(l(e),!0)}return!0}function d(){let e=!0;return t.forEach(t=>{u(t)||(e=!1)}),n.disabled=!e,e}t.forEach(e=>{e.addEventListener("input",d),e.addEventListener("blur",()=>u(e))});let m=null;function v(e){o.innerHTML=e,o.hidden=!1,m&&clearTimeout(m),m=setTimeout(()=>{o.hidden=!0},3e3)}e.addEventListener("submit",async o=>{if(o.preventDefault(),!d()){const e=t.find(e=>!u(e));return void(e&&e.focus())}n.disabled=!0;try{const n=await async function(){const t=e.getAttribute("action")||"https://api.web3forms.com/submit",n=new FormData(e),o=await fetch(t,{method:"POST",body:n});if(!o.ok)throw new Error("HTTP "+o.status);return await o.json()}();n&&!0===n.success?(v("¡Mensaje enviado!<br>En breve nos pondremos en contacto con usted."),e.reset(),t.forEach(l)):v("Hubo un error al enviar: "+(n&&n.message?n.message:"Intenta de nuevo."))}catch(e){console.error(e),v("Hubo un error al enviar. Verifica tu conexión o inténtalo más tarde.")}finally{n.disabled=!0}}),n.disabled=!0}),document.getElementById("year").textContent=(new Date).getFullYear();